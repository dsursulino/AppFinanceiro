{"ast":null,"code":"// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport { FichaBUS } from '../../src/business/fichaBUS';\nconst prisma = new PrismaClient();\nexport default async function (req, res) {\n  const fichaBUS = new FichaBUS(prisma);\n\n  if (req.method === 'POST') {\n    const {\n      body\n    } = req;\n    console.log('chamando a bus');\n    fichaBUS.create(JSON.parse(body)).then(data => {\n      res.json(data);\n    }).catch(erro => {\n      res.json(erro);\n    });\n  }\n\n  if (req.method === 'GET') {\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}","map":{"version":3,"sources":["D:/Projetos/TMB/front/solicitacao_credito/pages/api/ficha.js"],"names":["PrismaClient","FichaBUS","prisma","req","res","fichaBUS","method","body","console","log","create","JSON","parse","then","data","json","catch","erro","movie","ficha","findMany"],"mappings":"AACA;AACA,SAASA,YAAT,QAA6B,gBAA7B;AACA,SAAQC,QAAR,QAAuB,6BAAvB;AACA,MAAMC,MAAM,GAAG,IAAIF,YAAJ,EAAf;AAEA,eAAe,gBAAgBG,GAAhB,EAAqBC,GAArB,EAA0B;AAEvC,QAAMC,QAAQ,GAAI,IAAIJ,QAAJ,CAAaC,MAAb,CAAlB;;AACA,MAAIC,GAAG,CAACG,MAAJ,KAAe,MAAnB,EAA2B;AAEzB,UAAM;AAAEC,MAAAA;AAAF,QAAWJ,GAAjB;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAJ,IAAAA,QAAQ,CAACK,MAAT,CAAgBC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAhB,EAAkCM,IAAlC,CAAuCC,IAAI,IAAE;AAACV,MAAAA,GAAG,CAACW,IAAJ,CAASD,IAAT;AAAgB,KAA9D,EAAgEE,KAAhE,CAAsEC,IAAI,IAAE;AAACb,MAAAA,GAAG,CAACW,IAAJ,CAASE,IAAT;AAAgB,KAA7F;AAED;;AACD,MAAId,GAAG,CAACG,MAAJ,KAAe,KAAnB,EAA0B;AAExB,UAAMY,KAAK,GAAG,MAAMhB,MAAM,CAACiB,KAAP,CAAaC,QAAb,EAApB;AACAhB,IAAAA,GAAG,CAACW,IAAJ,CAASG,KAAT;AACD;AACF","sourcesContent":["\n// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport {FichaBUS} from '../../src/business/fichaBUS'\nconst prisma = new PrismaClient();\n\nexport default async function (req, res) {\n\n  const fichaBUS =  new FichaBUS(prisma);\n  if (req.method === 'POST') {\n\n    const { body } = req;\n    console.log('chamando a bus');\n    fichaBUS.create(JSON.parse(body)).then(data=>{res.json(data);}).catch(erro=>{res.json(erro);});\n\n  }\n  if (req.method === 'GET') {\n\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}"]},"metadata":{},"sourceType":"module"}