{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { PrismaClient } from '@prisma/client';\nvar prisma = new PrismaClient();\nexport default function (_x, _x2) {\n  return _ref.apply(this, arguments);\n}\n\nfunction _ref() {\n  _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var body, movie, _body, _movie;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(req.method === 'POST')) {\n              _context.next = 6;\n              break;\n            }\n\n            body = req.body;\n            _context.next = 4;\n            return prisma.ficha.create({\n              data: JSON.parse(body)\n            });\n\n          case 4:\n            movie = _context.sent;\n            res.json(movie);\n\n          case 6:\n            if (!(req.method === 'GET')) {\n              _context.next = 12;\n              break;\n            }\n\n            _body = req.body;\n            _context.next = 10;\n            return prisma.ficha.findMany();\n\n          case 10:\n            _movie = _context.sent;\n            res.json(_movie);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _ref.apply(this, arguments);\n}","map":{"version":3,"sources":["D:/Projetos/TMB/front/solicitacao_credito/pages/ficha.ts"],"names":["PrismaClient","prisma","req","res","method","body","ficha","create","data","JSON","parse","movie","json","findMany"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,gBAA7B;AAEA,IAAMC,MAAM,GAAG,IAAID,YAAJ,EAAf;AAEA;AAAA;AAAA;;;kEAAe,iBAAgBE,GAAhB,EAAqBC,GAArB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,kBACTD,GAAG,CAACE,MAAJ,KAAe,MADN;AAAA;AAAA;AAAA;;AAEHC,YAAAA,IAFG,GAEMH,GAFN,CAEHG,IAFG;AAAA;AAAA,mBAGSJ,MAAM,CAACK,KAAP,CAAaC,MAAb,CAAoB;AAAEC,cAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWL,IAAX;AAAR,aAApB,CAHT;;AAAA;AAGLM,YAAAA,KAHK;AAIXR,YAAAA,GAAG,CAACS,IAAJ,CAASD,KAAT;;AAJW;AAAA,kBAMTT,GAAG,CAACE,MAAJ,KAAe,KANN;AAAA;AAAA;AAAA;;AAOHC,YAAAA,KAPG,GAOMH,GAPN,CAOHG,IAPG;AAAA;AAAA,mBAQSJ,MAAM,CAACK,KAAP,CAAaO,QAAb,EART;;AAAA;AAQLF,YAAAA,MARK;AASXR,YAAAA,GAAG,CAACS,IAAJ,CAASD,MAAT;;AATW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport default async function (req, res) {\n  if (req.method === 'POST') {\n    const { body } = req;\n    const movie = await prisma.ficha.create({ data: JSON.parse(body) });\n    res.json(movie);\n  }\n  if (req.method === 'GET') {\n    const { body } = req;\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n\n}"]},"metadata":{},"sourceType":"module"}