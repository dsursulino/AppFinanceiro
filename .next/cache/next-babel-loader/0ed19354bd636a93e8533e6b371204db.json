{"ast":null,"code":"// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport { FichaBUS } from '../../src/business/fichaBUS';\nimport { Guid } from \"guid-typescript\";\nconst prisma = new PrismaClient();\nexport default async function (req, res) {\n  const fichaBUS = new FichaBUS();\n\n  if (req.method === 'POST') {\n    const {\n      body\n    } = req;\n    const value = Object.assign({\n      celular: undefined,\n      cep: undefined,\n      cpf: undefined,\n      email: undefined,\n      endereco: undefined,\n      etapa: undefined,\n      nome: undefined,\n      token: Guid.create()\n    }, JSON.parse(body));\n    console.log(value);\n    const movie = await prisma.ficha.create({\n      data: value\n    });\n    res.json(movie);\n  }\n\n  if (req.method === 'GET') {\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}","map":{"version":3,"sources":["D:/Projetos/TMB/front/solicitacao_credito/pages/api/ficha.js"],"names":["PrismaClient","FichaBUS","Guid","prisma","req","res","fichaBUS","method","body","value","Object","assign","celular","undefined","cep","cpf","email","endereco","etapa","nome","token","create","JSON","parse","console","log","movie","ficha","data","json","findMany"],"mappings":"AACA;AACA,SAASA,YAAT,QAA6B,gBAA7B;AACA,SAAQC,QAAR,QAAuB,6BAAvB;AACA,SAASC,IAAT,QAAqB,iBAArB;AAEA,MAAMC,MAAM,GAAG,IAAIH,YAAJ,EAAf;AAEA,eAAe,gBAAgBI,GAAhB,EAAqBC,GAArB,EAA0B;AAEvC,QAAMC,QAAQ,GAAI,IAAIL,QAAJ,EAAlB;;AACA,MAAIG,GAAG,CAACG,MAAJ,KAAe,MAAnB,EAA2B;AAEzB,UAAM;AAAEC,MAAAA;AAAF,QAAWJ,GAAjB;AAEC,UAAMK,KAAK,GAAEC,MAAM,CAACC,MAAP,CAAc;AAACC,MAAAA,OAAO,EAAEC,SAAV;AAAqBC,MAAAA,GAAG,EAAED,SAA1B;AAAqCE,MAAAA,GAAG,EAAEF,SAA1C;AAAoDG,MAAAA,KAAK,EAAEH,SAA3D;AAAsEI,MAAAA,QAAQ,EAAEJ,SAAhF;AAA0FK,MAAAA,KAAK,EAACL,SAAhG;AAA2GM,MAAAA,IAAI,EAAEN,SAAjH;AAA4HO,MAAAA,KAAK,EAAClB,IAAI,CAACmB,MAAL;AAAlI,KAAd,EAA+JC,IAAI,CAACC,KAAL,CAAWf,IAAX,CAA/J,CAAb;AAEJgB,IAAAA,OAAO,CAACC,GAAR,CAAYhB,KAAZ;AAEA,UAAMiB,KAAK,GAAG,MAAMvB,MAAM,CAACwB,KAAP,CAAaN,MAAb,CAAoB;AAACO,MAAAA,IAAI,EAAEnB;AAAP,KAApB,CAApB;AACGJ,IAAAA,GAAG,CAACwB,IAAJ,CAASH,KAAT;AAGD;;AACD,MAAItB,GAAG,CAACG,MAAJ,KAAe,KAAnB,EAA0B;AAExB,UAAMmB,KAAK,GAAG,MAAMvB,MAAM,CAACwB,KAAP,CAAaG,QAAb,EAApB;AACAzB,IAAAA,GAAG,CAACwB,IAAJ,CAASH,KAAT;AACD;AACF","sourcesContent":["\n// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport {FichaBUS} from '../../src/business/fichaBUS'\nimport { Guid } from \"guid-typescript\";\n\nconst prisma = new PrismaClient();\n\nexport default async function (req, res) {\n\n  const fichaBUS =  new FichaBUS();\n  if (req.method === 'POST') {\n\n    const { body } = req;\n\n     const value =Object.assign({celular: undefined, cep: undefined, cpf: undefined,email: undefined, endereco: undefined,etapa:undefined, nome: undefined, token:Guid.create()},JSON.parse(body));\n\n console.log(value);\n\n const movie = await prisma.ficha.create({data: value});\n    res.json(movie);\n\n\n  }\n  if (req.method === 'GET') {\n\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}"]},"metadata":{},"sourceType":"module"}