{"ast":null,"code":"// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport { FichaBUS } from '../../src/business/fichaBUS';\nconst prisma = new PrismaClient();\nexport default async function (req, res) {\n  const fichaBUS = new FichaBUS();\n\n  if (req.method === 'POST') {\n    const {\n      body\n    } = req;\n    const movie = await prisma.ficha.create({\n      data: JSON.parse(body)\n    });\n    res.json(movie);\n  }\n\n  if (req.method === 'GET') {\n    const x = fichaBUS.create(null).then(item => {\n      //const movie = await prisma.ficha.findMany();\n      //\n      res.json(\"movie\");\n    }).catch(erro => {\n      res.json(erro);\n    });\n    await x;\n  }\n}","map":{"version":3,"sources":["D:/Projetos/TMB/front/solicitacao_credito/pages/api/ficha.js"],"names":["PrismaClient","FichaBUS","prisma","req","res","fichaBUS","method","body","movie","ficha","create","data","JSON","parse","json","x","then","item","catch","erro"],"mappings":"AACA;AACA,SAASA,YAAT,QAA6B,gBAA7B;AACA,SAAQC,QAAR,QAAuB,6BAAvB;AACA,MAAMC,MAAM,GAAG,IAAIF,YAAJ,EAAf;AAEA,eAAe,gBAAgBG,GAAhB,EAAqBC,GAArB,EAA0B;AAEvC,QAAMC,QAAQ,GAAI,IAAIJ,QAAJ,EAAlB;;AACA,MAAIE,GAAG,CAACG,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAM;AAAEC,MAAAA;AAAF,QAAWJ,GAAjB;AACA,UAAMK,KAAK,GAAG,MAAMN,MAAM,CAACO,KAAP,CAAaC,MAAb,CAAoB;AAAEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWN,IAAX;AAAR,KAApB,CAApB;AACAH,IAAAA,GAAG,CAACU,IAAJ,CAASN,KAAT;AACD;;AACD,MAAIL,GAAG,CAACG,MAAJ,KAAe,KAAnB,EAA0B;AACxB,UAAMS,CAAC,GAAEV,QAAQ,CAACK,MAAT,CAAgB,IAAhB,EAAsBM,IAAtB,CAA2BC,IAAI,IAAE;AACxC;AACA;AACAb,MAAAA,GAAG,CAACU,IAAJ,CAAS,OAAT;AAEA,KALO,EAMPI,KANO,CAMDC,IAAI,IAAE;AAEZf,MAAAA,GAAG,CAACU,IAAJ,CAASK,IAAT;AACA,KATO,CAAT;AAUC,UAAMJ,CAAN;AACF;AACF","sourcesContent":["\n// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport {FichaBUS} from '../../src/business/fichaBUS'\nconst prisma = new PrismaClient();\n\nexport default async function (req, res) {\n\n  const fichaBUS =  new FichaBUS();\n  if (req.method === 'POST') {\n    const { body } = req;\n    const movie = await prisma.ficha.create({ data: JSON.parse(body) });\n    res.json(movie);\n  }\n  if (req.method === 'GET') {\n    const x= fichaBUS.create(null).then(item=>{\n      //const movie = await prisma.ficha.findMany();\n      //\n      res.json(\"movie\");\n\n     })\n     .catch(erro=>{\n\n      res.json(erro);\n     });\n     await x;\n  }\n}"]},"metadata":{},"sourceType":"module"}