{"ast":null,"code":"// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport { FichaBUS } from '../../src/business/fichaBUS';\nimport Cors from 'cors';\nimport initMiddleware from '../../lib/init-middleware'; // Initialize the cors middleware\n\nconst cors = initMiddleware( // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\nCors({\n  // Only allow requests with GET, POST and OPTIONS\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nconst prisma = new PrismaClient();\nexport default async function (req, res) {\n  await cors(req, res);\n  const fichaBUS = new FichaBUS(prisma);\n\n  if (req.method === 'POST') {\n    const {\n      body\n    } = req;\n    const ficha = await fichaBUS.create(JSON.parse(body));\n    res.json(ficha);\n  }\n\n  if (req.method === 'GET') {\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}","map":{"version":3,"sources":["D:/Projetos/TMB/front/solicitacao_credito/pages/api/ficha.js"],"names":["PrismaClient","FichaBUS","Cors","initMiddleware","cors","methods","prisma","req","res","fichaBUS","method","body","ficha","create","JSON","parse","json","movie","findMany"],"mappings":"AACA;AACA,SAASA,YAAT,QAA6B,gBAA7B;AACA,SAAQC,QAAR,QAAuB,6BAAvB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,cAAP,MAA2B,2BAA3B,C,CAEA;;AACA,MAAMC,IAAI,GAAGD,cAAc,EACzB;AACAD,IAAI,CAAC;AACH;AACAG,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB;AAFN,CAAD,CAFqB,CAA3B;AAOA,MAAMC,MAAM,GAAG,IAAIN,YAAJ,EAAf;AAEA,eAAe,gBAAgBO,GAAhB,EAAqBC,GAArB,EAA0B;AACvC,QAAMJ,IAAI,CAACG,GAAD,EAAMC,GAAN,CAAV;AACA,QAAMC,QAAQ,GAAI,IAAIR,QAAJ,CAAaK,MAAb,CAAlB;;AACA,MAAIC,GAAG,CAACG,MAAJ,KAAe,MAAnB,EAA2B;AAEzB,UAAM;AAAEC,MAAAA;AAAF,QAAWJ,GAAjB;AACA,UAAMK,KAAK,GAAG,MAAMH,QAAQ,CAACI,MAAT,CAAgBC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAhB,CAApB;AACAH,IAAAA,GAAG,CAACQ,IAAJ,CAASJ,KAAT;AACD;;AACD,MAAIL,GAAG,CAACG,MAAJ,KAAe,KAAnB,EAA0B;AAExB,UAAMO,KAAK,GAAG,MAAMX,MAAM,CAACM,KAAP,CAAaM,QAAb,EAApB;AACAV,IAAAA,GAAG,CAACQ,IAAJ,CAASC,KAAT;AACD;AACF","sourcesContent":["\n// /pages/api/movies.js\nimport { PrismaClient } from '@prisma/client';\nimport {FichaBUS} from '../../src/business/fichaBUS'\nimport Cors from 'cors'\nimport initMiddleware from '../../lib/init-middleware'\n\n// Initialize the cors middleware\nconst cors = initMiddleware(\n  // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\n  Cors({\n    // Only allow requests with GET, POST and OPTIONS\n    methods: ['GET', 'POST', 'OPTIONS'],\n  })\n)\nconst prisma = new PrismaClient();\n\nexport default async function (req, res) {\n  await cors(req, res)\n  const fichaBUS =  new FichaBUS(prisma);\n  if (req.method === 'POST') {\n\n    const { body } = req;\n    const ficha = await fichaBUS.create(JSON.parse(body));\n    res.json(ficha);\n  }\n  if (req.method === 'GET') {\n\n    const movie = await prisma.ficha.findMany();\n    res.json(movie);\n  }\n}"]},"metadata":{},"sourceType":"module"}